@{
    ViewBag.Title = "Home Page";
}

@using Library.Domain.Core.Models
@model IEnumerable<Book>


<input class="form-control" id="myInput" type="text" placeholder="Search by Name/Author">


<table class="table table-striped">
    <thead>
        <tr>
            <th>Name</th>
            <th>Authors</th>
            <th>Count</th>
            <th></th>
        </tr>
    </thead>
    <tbody id="myTable">
        @foreach (var item in Model)
        {
            <tr>
                <td>@item.Name</td>
                <td>@(String.Join(", ", item.Authors.Select(x => x.Name)))</td>
                <td>@item.Count</td>
                <td>
                    @Html.ActionLink("Details", "Details", new { bookId = item.Id }, new { @class = "btn btn-info" })

                    @if (!(HttpContext.Current.User.IsInRole("Administrator") ||
                        HttpContext.Current.User.IsInRole("Librarian")))
                    {
                        @Html.ActionLink("Order", "CreateOrder", new { bookId = item.Id }, new { @class = "btn btn-success" })
                    }
                </td>

            </tr>
        }
    </tbody>
</table>

<div class="row">
    @*//  TODO: pagination *@
    <div class="text-center">
        <ul class="pagination">
            <li><a href="#"><<</a></li>

            <li><a href="#">1</a></li>
            <li><a href="#">2</a></li>
            <li><a href="#">3</a></li>
            <li><a href="#">4</a></li>
            <li><a href="#">5</a></li>

            <li><a href="#">>></a></li>
        </ul>
    </div>
</div>

<script>
    // TODO: sort books
    $(document).ready(function () {
        $("#myInput").on("keyup", function () {
            var value = $(this).val().toLowerCase();
            $("#myTable tr").filter(function () {
                $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)
            });
        });
    });
</script>